<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üçÑ Shrooms Bloom Idle</title>
    <style>
        :root { --neon: #ff00ff; --cyan: #00ffff; --gold: #ffd700; --bg: #0a0118; --xp: #39ff14; }
        body { 
            margin: 0; font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); color: #fff; text-align: center; 
            touch-action: manipulation; user-select: none;
        }
        #topBar { padding: 15px; border-bottom: 2px solid var(--neon); background: rgba(0,0,0,0.8); }
        .spore-display { font-size: 3em; color: var(--gold); font-weight: 800; margin: 20px 0; }
        #mushroomClicker { 
            font-size: 120px; cursor: pointer; display: inline-block; 
            transition: transform 0.05s; animation: pulse 3s infinite ease-in-out; 
        }
        #mushroomClicker:active { transform: scale(0.9); }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        
        .upgrade-container { 
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; 
            max-width: 500px; margin: 20px auto; padding: 0 15px;
        }
        .upgrade-card {
            background: rgba(255,255,255,0.05); border: 1px solid var(--neon);
            padding: 15px; border-radius: 12px; cursor: pointer;
        }
        .upgrade-card:disabled { opacity: 0.4; cursor: not-allowed; }
        .upgrade-card h3 { margin: 0 0 5px 0; font-size: 0.9em; color: var(--cyan); }
        .cost { font-weight: bold; color: var(--gold); }

        .stat-box { margin-top: 20px; font-size: 0.9em; opacity: 0.8; }
        .reset-btn { margin-top: 40px; background: none; border: 1px solid #444; color: #666; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

<div id="topBar">
    <h1 style="margin:0; font-size: 1.5em; color: var(--neon);">SHROOMS BLOOM</h1>
</div>

<div class="spore-display" id="sporeCount">0</div>
<div id="mushroomClicker" onclick="handleClick()">üçÑ</div>

<div class="stat-box">
    Spores Per Second: <span id="spsDisplay">0</span><br>
    Total Mushrooms: <span id="shroomCount">0</span>
</div>

<div class="upgrade-container" id="upgrades">
    </div>

<button class="reset-btn" onclick="hardReset()">Hard Reset Progress</button>

<script>
    let state = {
        spores: 0,
        mushrooms: 0,
        upgrades: {
            collector: { name: "Collector", qty: 0, baseCost: 15, sps: 1 },
            patch: { name: "Fungal Patch", qty: 0, baseCost: 100, sps: 5 },
            grove: { name: "Ancient Grove", qty: 0, baseCost: 1100, sps: 20 },
            void: { name: "Void Mycelium", qty: 0, baseCost: 12000, sps: 100 }
        }
    };

    function handleClick() {
        state.spores += 1;
        updateUI();
    }

    function buyUpgrade(id) {
        let u = state.upgrades[id];
        let cost = Math.floor(u.baseCost * Math.pow(1.15, u.qty));
        if (state.spores >= cost) {
            state.spores -= cost;
            u.qty++;
            updateUI();
            save();
        }
    }

    function calculateSPS() {
        let total = 0;
        for (let key in state.upgrades) {
            total += state.upgrades[key].qty * state.upgrades[key].sps;
        }
        return total;
    }

    function updateUI() {
        document.getElementById('sporeCount').textContent = Math.floor(state.spores).toLocaleString();
        document.getElementById('spsDisplay').textContent = calculateSPS().toLocaleString();
        
        const container = document.getElementById('upgrades');
        container.innerHTML = '';
        
        for (let key in state.upgrades) {
            let u = state.upgrades[key];
            let cost = Math.floor(u.baseCost * Math.pow(1.15, u.qty));
            let btn = document.createElement('button');
            btn.className = 'upgrade-card';
            btn.disabled = state.spores < cost;
            btn.onclick = () => buyUpgrade(key);
            btn.innerHTML = `
                <h3>${u.name} (${u.qty})</h3>
                <span class="cost">${cost} Spores</span><br>
                <small>+${u.sps} SPS</small>
            `;
            container.appendChild(btn);
        }
    }

    function save() {
        localStorage.setItem('shroom_save_revert', JSON.stringify(state));
    }

    function load() {
        const saved = localStorage.getItem('shroom_save_revert');
        if (saved) state = JSON.parse(saved);
        updateUI();
    }

    function hardReset() {
        if (confirm("Delete all progress?")) {
            localStorage.clear();
            location.reload();
        }
    }

    // Game Loop
    setInterval(() => {
        state.spores += calculateSPS() / 10;
        updateUI();
    }, 100);

    // Auto-save every 30s
    setInterval(save, 30000);

    load();
</script>

</body>
</html>
